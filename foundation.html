<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration Form</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>HAMZURY HUB</title>
    <meta name="description" content="Hamzury">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="img/hamzury1 copy.png" type="image/x-icon">
    <base target="_top">tS

    <!-- External CSS -->
    <link rel="stylesheet" href="vendor/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="vendor/lightcase/lightcase.css">
     <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400|Work+Sans:300,400,700" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.min.css">
    <link rel="stylesheet" href="css/ourcourses.css">
    <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0-beta2/css/all.css">
    <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
    <!-- Modernizr JS for IE8 support of HTML5 elements and media queries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
    <style>
        body {
            background: linear-gradient(to left, #2C5364, #203A43);
            font-family: 'Montserrat', sans-serif;
            padding: 20px;
        }
        #msform {
            background: white;
            border-radius: 5px;
            box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);
            padding: 20px 30px;
            max-width: 600px;
            margin: 30px auto;
            margin-top: 100px;
        }
        #msform fieldset {
            display: none;
        }
        #msform fieldset:first-of-type {
            display: block;
        }
        .fs-title {
            font-size: 25px;
            text-transform: uppercase;
            color: #2C3E50;
            margin-bottom: 10px;
            font-weight: bold;
            text-align: center;
        }
        .fs-subtitle {
            font-weight: normal;
            font-size: 17px;
            color: #666;
            margin-bottom: 20px;
            text-align: center;
        }
        #progressbar {
            margin-bottom: 30px;
            overflow: hidden;
            counter-reset: step;
            padding-left: 0;
        }
        #progressbar li {
            list-style-type: none;
            color: #2C3E50;
            text-transform: uppercase;
            font-size: 13px;
            width: 33.33%;
            float: left;
            position: relative;
            text-align: center;
        }
        #progressbar li:before {
            content: counter(step);
            counter-increment: step;
            width: 24px;
            line-height: 24px;
            display: block;
            font-size: 12px;
            color: white;
            background: #2C3E50;
            border-radius: 25px;
            margin: 0 auto 5px auto;
        }
        #progressbar li:after {
            content: '';
            width: 100%;
            height: 2px;
            background: #2C3E50;
            position: absolute;
            left: -50%;
            top: 9px;
            z-index: -1;
        }
        #progressbar li:first-child:after {
            content: none;
        }
        #progressbar li.active:before, #progressbar li.active:after {
            background: linear-gradient(90deg, #aa4b6b, #6b6b83, #3b8d99);
        }
        #successMessage {
            display: none;
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
            border-radius: 5px;
        }
        .fa-check-circle {
            color: #28a745;
            font-size: 48px;
            margin-bottom: 10px;
        }
        .error-message {
            color: #dc3545;
            font-size: 0.875em;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body>
    <nav id="header-navbar" class="navbar navbar-expand-lg py-4">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center text-white" href="/">
                <img src="https://res.cloudinary.com/dtqzcsq0i/image/upload/v1711355987/Hamzury_New_Logo_png_exvptw.png" alt="" width="70px" style="filter: invert(0);">
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-nav-header" aria-controls="navbar-nav-header" aria-expanded="false" aria-label="Toggle navigation">
                <span class="lnr lnr-menu"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar-nav-header">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="our courses.html">Programs</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Other Services</a>
                    </li>
                    <li class="nav-item">
                        <a id="side-search-open" class="nav-link" href="#">
                            <span class="lnr lnr-magnifier"></span>
                        </a>
                    </li>
                     <li class="nav-item only-desktop">
                        <a class="nav-link" id="side-nav-open" href="#">
                            <span class="lnr lnr-menu"></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div id="side-nav" class="sidenav">
        <a href="javascript:void(0)" id="side-nav-close">&times;</a>
        
        <div class="sidenav-content">
            <p>
            Majema Junction, Bauchi Road Jos
            </p>
            <p>
                <span class="fs-16 primary-color">+234 09130700056</span>
            </p>
            <p>info@hamzury.com</p>
        </div>
    </div><div id="side-search" class="sidenav">
        <a href="javascript:void(0)" id="side-search-close">&times;</a>
        <div class="sidenav-content">
            <form action="">
    
                <div class="input-group md-form form-sm form-2 pl-0">
                  <input class="form-control my-0 py-1 red-border" type="text" placeholder="Search" aria-label="Search">
                  <div class="input-group-append">
                    <button class="input-group-text red lighten-3" id="basic-text1">
                        <span class="lnr lnr-magnifier"></span>
                    </button>
                  </div>
                </div>
    
            </form>
        </div>
        </div>
    <div class="container">
        <form id="msform" action="process_form.php" method="POST" enctype="multipart/form-data">
            <!-- progressbar -->
            <ul id="progressbar">
                <li class="active">Personal Details</li>
                <li>Additional Info</li>
                <li>Guarantor Details</li>
            </ul>
            
            <!-- fieldsets -->
            <fieldset>
                <h2 class="fs-title">Personal Details</h2>
                <h3 class="fs-subtitle">Tell us about yourself</h3>
                <div class="mb-3">
                    <input type="text" class="form-control" name="full_name" placeholder="Full Name" required>
                    <div class="error-message" id="full_name_error"></div>
                </div>
                <div class="mb-3">
                    <input type="date" class="form-control" name="dob" id="dob" required>
                    <div class="error-message" id="dob_error"></div>
                </div>
                <div class="mb-3">
                    <input type="number" class="form-control" name="age" id="age" placeholder="Age" readonly>
                    <div class="error-message" id="age_error"></div>
                </div>
                <div class="mb-3">
                    <input type="tel" class="form-control" name="phone" placeholder="Phone" required>
                    <div class="error-message" id="phone_error"></div>
                </div>
                <input type="button" name="next" class="next btn btn-primary" value="Next"/>
            </fieldset>
            
            <fieldset>
                <h2 class="fs-title">Additional Information</h2>
                <h3 class="fs-subtitle">We need some more details</h3>
                <div class="mb-3">
                    <input type="text" class="form-control" name="address" placeholder="Address" required>
                    <div class="error-message" id="address_error"></div>
                </div>
                <div class="mb-3">
                    <label for="photo" class="form-label">Passport:</label>
                    <input type="file" class="form-control" name="photo" accept="image/*" required>
                    <div class="error-message" id="photo_error"></div>
                </div>
                <input type="button" name="previous" class="previous btn btn-secondary" value="Previous"/>
                <input type="button" name="next" class="next btn btn-primary" value="Next"/>
            </fieldset>
            
            <fieldset>
                <h2 class="fs-title">Guarantor Details</h2>
                <h3 class="fs-subtitle">Information about your guarantor</h3>
                <div class="mb-3">
                    <input type="text" class="form-control" name="guarantor_name" placeholder="Guarantor Full Name" required>
                    <div class="error-message" id="guarantor_name_error"></div>
                </div>
                <div class="mb-3">
                    <input type="email" class="form-control" name="guarantor_email" placeholder="Guarantor Email" required>
                    <div class="error-message" id="guarantor_email_error"></div>
                </div>
                <div class="mb-3">
                    <input type="tel" class="form-control" name="guarantor_phone" placeholder="Guarantor Phone" required>
                    <div class="error-message" id="guarantor_phone_error"></div>
                </div>
                <div class="mb-3">
                    <input type="text" class="form-control" name="guarantor_address" placeholder="Guarantor Address" required>
                    <div class="error-message" id="guarantor_address_error"></div>
                </div>
                <div class="mb-3">
                    <input type="text" class="form-control" name="relationship" placeholder="Relationship with the student" required>
                    <div class="error-message" id="relationship_error"></div>
                </div>
                <input type="button" name="previous" class="previous btn btn-secondary" value="Previous"/>
                <input type="submit" name="submit" class="submit btn btn-success" value="Submit"/>
            </fieldset>
        </form>
    </div>
    <div id="successMessage">
        <i class="fas fa-check-circle"></i>
        <h3>Thank you, your response has been recorded!</h3>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script>
    $(document).ready(function(){
        var current_fs, next_fs, previous_fs;
    
        $(".next").click(function(){
            if(validateFieldset($(this).parent())) {
                current_fs = $(this).parent();
                next_fs = $(this).parent().next();
                
                $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
                
                next_fs.show();
                current_fs.hide();
            }
        });
    
        $(".previous").click(function(){
            current_fs = $(this).parent();
            previous_fs = $(this).parent().prev();
            
            $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");
            
            previous_fs.show();
            current_fs.hide();
        });
    
        $("#msform").on("submit", function(e) {
            e.preventDefault();
            if(validateForm()) {
                var formData = new FormData(this);
    
                $.ajax({
                    url: "process_form.php",
                    type: "POST",
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function(response) {
                        if(response.trim() === "success") {
                            $("#msform").hide();
                            $("#successMessage").show();
                        } else {
                            alert("An error occurred. Please try again.");
                        }
                    },
                    error: function() {
                        alert("An error occurred. Please try again.");
                    }
                });
            }
        });
    
        // In-line validation
        $('input').on('blur', function() {
            validateField($(this));
        });
    
        // Calculate age when date of birth changes
        $('#dob').on('change', function() {
            calculateAge();
        });
    
        function validateFieldset(fieldset) {
            var isValid = true;
            fieldset.find('input').each(function() {
                if(!validateField($(this))) {
                    isValid = false;
                }
            });
            return isValid;
        }
    
        function validateForm() {
            var isValid = true;
            $('#msform input').each(function() {
                if(!validateField($(this))) {
                    isValid = false;
                }
            });
            return isValid;
        }
    
        function calculateAge() {
            var dob = new Date($('#dob').val());
            var today = new Date();
            var age = today.getFullYear() - dob.getFullYear();
            var m = today.getMonth() - dob.getMonth();
            if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            $('#age').val(age);
            validateField($('#dob')); // Validate the date of birth field
        }
    
        function validateField(field) {
            var fieldName = field.attr('name');
            var value = field.val().trim();
            var errorElement = $('#' + fieldName + '_error');
    
            switch(fieldName) {
                case 'full_name':
                case 'guarantor_name':
                    if(value.length < 2) {
                        showError(errorElement, 'Name must be at least 2 characters long');
                        return false;
                    }
                    break;
                case 'dob':
                    var dob = new Date(value);
                    var today = new Date();
                    var age = today.getFullYear() - dob.getFullYear();
                    var m = today.getMonth() - dob.getMonth();
                    if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                        age--;
                    }
                    if(age < 16 || age > 100) {
                        showError(errorElement, 'Age must be between 16 and 100');
                        return false;
                    }
                    $('#age').val(age); // Update the age field
                    break;
                case 'phone':
                case 'guarantor_phone':
                    if(!value.match(/^\d{11}$/)) {
                        showError(errorElement, 'Phone number must be 11 digits');
                        return false;
                    }
                    break;
                case 'address':
                case 'guarantor_address':
                    if(value.length < 5) {
                        showError(errorElement, 'Address must be at least 5 characters long');
                        return false;
                    }
                    break;
                case 'photo':
                    var file = field[0].files[0];
                    if(file) {
                        var fileSize = file.size / 1024 / 1024; // in MB
                        if(fileSize > 5) {
                            showError(errorElement, 'File size must be less than 5MB');
                            return false;
                        }
                    }
                    break;
                case 'guarantor_email':
                    if(!value.match(/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/)) {
                        showError(errorElement, 'Please enter a valid email address');
                        return false;
                    }
                    break;
                case 'relationship':
                    if(value.length < 3) {
                        showError(errorElement, 'Relationship must be at least 3 characters long');
                        return false;
                    }
                    break;
            }
    
            errorElement.text('');
            return true;
        }
    
        function showError(element, message) {
            element.text(message);
        }
    });
    
    </script>

</body>

</html>